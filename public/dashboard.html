<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Automation Dashboard</title>

<style>
body{margin:0;font-family:Segoe UI,Arial;background:#0b0f1a;color:#fff}
.container{display:flex;min-height:100vh}
.sidebar{width:300px;background:#0f172a;padding:18px}
.main{flex:1;padding:18px}

h2{color:#38bdf8;margin-top:0}
.label{font-size:12px;color:#94a3b8;margin-top:14px}

input,textarea{
  width:100%;padding:10px;margin-top:6px;
  background:#020617;border:1px solid #1e293b;
  color:#fff;border-radius:6px
}
textarea{resize:none}

button{
  width:100%;padding:11px;margin-top:10px;
  border:0;border-radius:6px;
  font-weight:bold;cursor:pointer
}
.add{background:#3b82f6;color:#fff}
.start{background:#22c55e;color:#000}
.stop{background:#ef4444;color:#000}

.status{font-size:13px;color:#94a3b8;margin-top:10px}

.cards{
  display:grid;grid-template-columns:repeat(4,1fr);
  gap:12px;margin-top:10px
}
.card{
  background:#020617;padding:14px;border-radius:10px;
  text-align:center
}
.card h3{margin:0;font-size:13px;color:#94a3b8}
.card p{margin:6px 0 0;font-size:26px}

.list{
  background:#020617;border-radius:10px;
  margin-top:12px;padding:10px;max-height:220px;overflow:auto
}
.item{
  display:flex;justify-content:space-between;
  padding:6px;border-bottom:1px solid #1e293b;
  font-size:13px
}
.item button{
  width:auto;padding:2px 8px;font-size:12px;
  background:#ef4444;color:#000
}

.logbox{
  background:#020617;border-radius:10px;
  margin-top:14px;padding:12px
}
.log{height:200px;overflow:auto;font-size:12px}

@media(max-width:900px){
  .container{flex-direction:column}
  .sidebar{width:100%}
  .cards{grid-template-columns:repeat(2,1fr)}
}
</style>
</head>

<body>
<div class="container">

<!-- LEFT -->
<div class="sidebar">
<h2>CHATGPT PRO v1.0</h2>

<div class="label">ADD NUMBER</div>
<input id="numInput" placeholder="017xxxxxxxx">
<button class="add" onclick="addNumber()">ADD</button>

<div class="status">
Total Numbers: <span id="numCount">0</span>
</div>

<button class="start" onclick="startEngine()">START ENGINE</button>
<button class="stop" onclick="stopEngine()">STOP ENGINE</button>

<div class="status" id="status">Status: Idle</div>
</div>

<!-- RIGHT -->
<div class="main">
<h2>CHATGPT DASHBOARD</h2>

<div class="cards">
  <div class="card"><h3>SUCCESS</h3><p id="success">0</p></div>
  <div class="card"><h3>FAILED</h3><p id="failed">0</p></div>
  <div class="card"><h3>ERROR</h3><p id="error">0</p></div>
  <div class="card"><h3>TOTAL</h3><p id="total">0</p></div>
</div>

<div class="list" id="list"></div>

<div class="logbox">
<h3>LIVE ACTIVITY LOG</h3>
<div class="log" id="log"></div>
</div>
</div>

</div>

<script>
let numbers=[];
let timer=null;
let running=false;

const listEl=document.getElementById("list");
const numCountEl=document.getElementById("numCount");
const logEl=document.getElementById("log");

function renderList(){
  listEl.innerHTML="";
  numbers.forEach((n,i)=>{
    const d=document.createElement("div");
    d.className="item";
    d.innerHTML=`${n} <button onclick="removeNumber(${i})">X</button>`;
    listEl.appendChild(d);
  });
  numCountEl.innerText=numbers.length;
}

function addNumber(){
  const v=document.getElementById("numInput").value.trim();
  if(!v || numbers.includes(v)) return;
  numbers.push(v);
  document.getElementById("numInput").value="";
  renderList();
}

function removeNumber(i){
  numbers.splice(i,1);
  renderList();
}

function log(msg){
  logEl.innerHTML=`[${new Date().toLocaleTimeString()}] ${msg}<br>`+logEl.innerHTML;
}

async function tick(){
  if(numbers.length===0){ log("NO NUMBERS"); return; }
  const n=numbers[Math.floor(Math.random()*numbers.length)];
  const r=await fetch("/api/mock-task");
  const d=await r.json();
  document.getElementById("total").innerText++;
  if(d.status==="success"){
    document.getElementById("success").innerText++;
    log(`SUCCESS → ${n}`);
  }else if(d.status==="failed"){
    document.getElementById("failed").innerText++;
    log(`FAILED → ${n}`);
  }else{
    document.getElementById("error").innerText++;
    log(`ERROR → ${n}`);
  }
}

function startEngine(){
  if(running) return;
  running=true;
  document.getElementById("status").innerText="Status: Running";
  log("ENGINE START");
  timer=setInterval(tick,2000);
}

function stopEngine(){
  running=false;
  clearInterval(timer);
  document.getElementById("status").innerText="Status: Idle";
  log("ENGINE STOP");
}
</script>
</body>
</html>
